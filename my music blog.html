<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Music Blog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bree+Serif&family=Nanum+Gothic+Coding&family=Nanum+Pen+Script&display=swap');

        * {
            font-family: 'Bree Serif', serif;
            font-family: 'Nanum Gothic Coding', monospace;
            font-family: 'Nanum Pen Script', cursive;
        }

        body {
            background-color: whitesmoke;
        }

        a {
            color: black;
            text-decoration: none;
        }

        hr {
            border: 0.1px solid black;
        }

        h5 {
            color: grey;
        }

        #headerimg {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            box-shadow: 0px 0px 5px 0px gray;
            margin-right: 10px;
        }

        #mainimg {
            border-radius: 50%;
            box-shadow: 0px 0px 3px 0px gray;
        }

        #imgdiv {
            width: 100px;
            margin: 20px auto 10px auto;
        }

        #header1 {
            text-align: center;
            background-image: url('https://www.bahaiblog.net/wp-content/uploads/2022/06/ebuen-clemente-jr-H5Iw3Xz0vxM-unsplash-1-scaled.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 5px;
            color: white;
            padding: 20px;
        }

        #div1 {
            border: 0.1px solid gray;
            box-shadow: 3px 3px 3px 3px gray;
            width: 340px;
            margin: 20px 10px 20px 50px;
            padding: 20px;
        }

        #div2 {
            border: 0.1px solid gray;
            box-shadow: 0px 0px 3px 0px gray;
            width: 300px;
            height: 600px;
            padding: 10px;
            float: right;

        }

        #main1 {
            display: flex;
            flex-direction: row;
        }

        #main2 {
            display: flex;
            flex-direction: row;
        }

        #savebox {
            width: 500px;
            margin: 20px auto 10px auto;
            border: 0.1px solid gray;
            box-shadow: 0px 0px 3px 0px gray;
            padding: 20px;
        }

        #movebutton1 {
            border: 0.1px solid black;
            box-shadow: 0px 0px -3px 0px gray;
            width: 80px;
            height: 50px;
            background-color: transparent;
            transition-duration: 0.3s;
        }

        #movebutton1:active {
            background-color: lightgray;
        }

        #footer1 {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        #button1 {
            background-color: transparent;
            border: 0.1px solid white;
            color: white;
            width: 150px;
            height: 30px;
            border-radius: 5px;
            transition-duration: 0.3s;
        }

        #button1:hover {
            background-color: lightgray;
        }

        #button1:active {
            background-color: whitesmoke;
        }

        #saveboxbutton {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }

        #saveboxbutton>button {
            margin-right: 5px;
        }

        #ulid {
            list-style: none;
            display: inline-block;
            margin-right: 5px;
            align-items: center;
        }

        #divimg {
            width: 300px;
            height: 300px;
            padding-bottom: 5px;
        }

        #searchbarform{
            display: flex;
            flex-direction: row;
        }
    </style>
    <script type="module">
        $(document).ready(function () {
            $('#savebox').toggle();
            let tempurl = 'http://spartacodingclub.shop/sparta_api/weather/seoul';
            fetch(tempurl).then(desh => desh.json()).then(date => {
                let temp = date['temp'];
                $('#temp').text(Math.trunc(temp));
            })
        });


        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";



        const firebaseConfig = {
            apiKey: "AIzaSyAn7KgUMs1eemLXCFUAtCI9uxeKhIaqRAA",
            authDomain: "sparta-ed39d.firebaseapp.com",
            projectId: "sparta-ed39d",
            storageBucket: "sparta-ed39d.appspot.com",
            messagingSenderId: "632575797315",
            appId: "1:632575797315:web:4f21ed37ca94edaec8ccf6",
            measurementId: "G-YSB6Y6FFG2"
        };


        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        let docs = await getDocs(collection(db, "musicblog"));
        docs.forEach((doc) => {
            let row = doc.data();
            let image = row['albumimage'];
            let name = row['albumname'];
            let date = row['albumdate'];
            let musicname = row['musicname'];

            let albumall = `<div id="div1">
            <div>
                <img src="${image}"
                    alt="앨범이미지" id="divimg">
            </div>
            <h3>${name}</h3>
            <h5>${date}</h5>
            <hr>
            <p>${musicname}</p>
        </div>`;
            $('#main1').append(albumall);
        });


        $('#button1').click(async function () {
            $('#savebox').toggle('slow');
        })
        $('#recordboxclose').click(async function () {
            $('#savebox').toggle('slow');
        })
        $('#recodebutton').click(async function () {

            let albumimage = $('#albumimg').val();
            let albumname = $('#albumname').val();
            let albumdate = $('#albumdate').val();
            let musicname = $('#musicname').val();

            if (albumimage && albumname && albumdate && musicname) {
                let doc = {
                    'albumimage': albumimage,
                    'albumname': albumname,
                    'albumdate': albumdate,
                    'musicname': musicname
                };
                await addDoc(collection(db, "musicblog"), doc);
                alert("추가 되었습니다.");
                window.location.reload();
            } else {
                alert("4가지 목록을 채워주세요!");
            }
        });

        function entersearch() {
            let cards = document.getElementById('main2');
            cards.innerHTML = '';
        }

    </script>
</head>

<body>
    <div class="px-3 py-2 border-bottom mb-3">
        <div class="container d-flex flex-wrap justify-content-center">
            <a href="my music blog.html"><img
                    src="https://yt3.ggpht.com/pXkvpFImGKNIEPJ5OP9qELWZ6kqSPDUnohWjeKoxnFbdqHdRRFzetlE8lmqABkIuPouw6yLt=s88-c-k-c0x00ffffff-no-rj"
                    alt="home" id="headerimg"></a>
            <form class="col-12 col-lg-auto mb-2 mb-lg-0 me-lg-auto" role="search" id="searchform">
                <input type="search" class="form-control" placeholder="Search..." aria-label="Search">
            </form>


            <div class="text-end">
                <ul id="ulid">
                    <li><a href="https://soundcloud.com/doharim">soundcloud</a></li>
                </ul>
                <button type="button" class="btn btn-light text-dark me-2"
                    onclick="window.location.href = 'login.html'">Login</button>
                <button type="button" class="btn btn-primary">Sign-up</button>
            </div>
        </div>
    </div>
    <header id="header1">
        <div>
            <div id="imgdiv">
                <img src="https://yt3.ggpht.com/pXkvpFImGKNIEPJ5OP9qELWZ6kqSPDUnohWjeKoxnFbdqHdRRFzetlE8lmqABkIuPouw6yLt=s88-c-k-c0x00ffffff-no-rj"
                    alt="main" id="mainimg">
            </div>
            <div>
                <h1>My Music Blog</h1>
                <p>서울 현재 온도: <span id="temp"></span>도</p>
                <button id="button1">저장하기</button>
            </div>
        </div>
    </header>
    <div id="savebox">
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="albumimg" placeholder="앨범 이미지">
            <label for="floatingInput">앨범 이미지</label>
        </div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="albumname" placeholder="앨범명">
            <label for="floatingInput">앨범명</label>
        </div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="albumdate" placeholder="출시일">
            <label for="floatingInput">출시일</label>
        </div>
        <div class="form-floating mb-3">
            <input type="email" class="form-control" id="musicname" placeholder="노래명, 가수이름">
            <label for="floatingInput">노래명 - 가수이름</label>
        </div>
        <div id="saveboxbutton">
            <button type="button" class="btn btn-danger" id="recodebutton">기록하기</button>
            <button type="button" class="btn btn-light" id="recordboxclose">닫기</button>
        </div>
    </div>
    <main id="main1">
    </main>
    <main id="main2">
    </main>
    <footer id="footer1">
        <p><button id="movebutton1">이전</button></p>
        <p><button id="movebutton1">다음</button>
        </p>
    </footer>
</body>

</html>
